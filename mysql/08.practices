[SQL 작성 모범 사례]

---
1. 기본 규칙

1. 모든 SQL 문장은 반드시 세미콜론(;)으로 종료한다.
2. `use <database>;` 로 명시적으로 DB를 지정한다.
3. 대소문자 구분은 MySQL의 OS 환경에 따라 다르므로
   - 명령어는 대문자 (CREATE, SELECT)
   - 식별자(DB명, 테이블명, 컬럼명)는 소문자 권장.
4. 가독성을 위해 SQL 예약어와 컬럼명을 줄바꿈 정렬한다.

예시:
select
    number,
    name,
    age
from tb1k
where age >= 30
order by age desc;

---

2. 쿼리 작성 패턴

**일관된 들여쓰기와 줄바꿈**
- SELECT 절 → FROM → WHERE → GROUP BY → HAVING → ORDER BY 순서 유지
- 조건이 여러 개면 괄호로 명확히 구분

**명시적 컬럼 사용**
- select * 대신 필요한 컬럼만 지정
  → 성능 + 보안 + 유지보수성 향상

**별칭(alias) 사용**
- 테이블명 길 경우 as 생략 가능
  select t.number, t.name from tb1k as t;

**WHERE 절에 함수 사용 최소화**
- index가 무효화되므로 가급적 컬럼 그대로 비교
  ex) where date(created_at) = '2025-10-26'  ❌
      where created_at between '2025-10-26 00:00:00' and '2025-10-26 23:59:59' ✅

---

3. DDL / DML 관리 팁

 DDL (구조 변경)
- 변경 전 반드시 `show create table`로 기존 구조 백업
- `alter` 시 컬럼 순서나 타입 변경은 영향 범위 주의

 DML (데이터 변경)
- update/delete 시 항상 where 절 포함
- 테스트 시 `select`로 조건 검증 후 실행
- autocommit off 환경에서는 commit 필수

---

4. 백업 및 복원

- 전체 DB 백업:
```

mysqldump -u root -p addrdb > addrdb_backup.sql

```

- 특정 테이블만 백업:
```

mysqldump -u root -p addrdb tb1k > tb1k_backup.sql

```

- 복원:
```
mysql -u root -p addrdb < addrdb_backup.sql

```

---

5. 환경 및 보안
 비밀번호 노출 방지:
- CLI에 직접 입력하지 않고 `--defaults-extra-file` 옵션 사용

사용자 최소 권한 원칙:
- 일반 계정은 SELECT, INSERT만 허용
- root 권한으로 직접 접속하지 않기

로그 기록:
- `general_log` 또는 `slow_query_log` 활성화로 쿼리 추적

---

# 6. 정리 문장

> "DDL은 구조를, DML은 데이터를, DCL은 권한을, TCL은 일관성을,  
> DQL은 통찰을 관리한다."

SQL은 단순 명령이 아니라 데이터 품질과 시스템 안정성을 지키는 약속이다.
```
